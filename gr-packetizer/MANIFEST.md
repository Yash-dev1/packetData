title: The PACKETIZER OOT Module
brief: The packetizer module is a collection of blocks for convenient packetized transmission
tags: # Tags are arbitrary, but look at CGRAN what other authors are using
  - sdr
  - packets
author:
  - Thomas Verelst <thomasverelst@outlook.com>
copyright_owner:
  - Thomas Verelst
license:
repo: 
	https://github.com/Thmz/gnuradioproject
#website: <module_website> # If you have a separate project website, put it here
#icon: <icon_url> # Put a URL to a square image here that will be used as an icon on CGRAN
---

This mdoule facilitates packetized transmission in GNU Radio. Several blocks are included and the blocks are demonstrated in examples.

Included blocks:
- Extended Packet Encoder
- Extended Packet Decoder
- Tagged Stream Fix
- Tagged Stream Whitener

Included helper blocks:
- Message sequence checker
- Pulse Shape Vector

Included blocks, based on existing GNU Radio blocks:
- Preamble/Header/Payload Demux
- Correlation Estimator 2


* Extended Packet Encoder 
The Extended Packet Encoder packetizes an incoming bit stream and will map the bits to symbols.The incoming stream should be an unpacked byte stream with 1 bit/byte, and tags should indicate the packet start and payload length The output is a non-modulated symbol stream (complex samples).The packets have the format: preamble, header, payload. The preamble should be given as a modulated sequence (for example, -1 and 1 for BPSK). The Pulse shape vector block of this packetizer module can be used to modulate the preamble. The data of the header is generated by the header formatter. The header will be mapped to symbols using the given header constellations. The data will be mapped to symbols using the given payload constellations. Between the different packets, there will be zero_padding number of zero samples. In case Whiten is set to true, the binary data will be whitened by XORing with a precomputed sequence..

* Extended Packet Decoder
The Extended Packet Decoder does the inverse operation

* Tagged Stream Fix
Fixes a stream where the packet length does not correspond to the number of samples.  For example, if we have a stream with a packet length tag with value 50, and between each tag there are 52 samples,
the block will remove the last 2 samples from the output stream to make a stream with packet length tag of 50 and 50 samples between each tag.

Tagged_stream blocks cannot handle "unbalanced" streams (more samples between packets than the packet length indicates), so this block will "fix" the stream so it is compatible with those blocks.

* Tagged Stream Whitener
This block whitens or dewhitens the given data stream. It expects a tagged stream where the tag marks the beginning of the packet and the value is the length of the value of the packet in chars. To dewhiten, just use the same block with exactly the same settings again on the stream.

* Message Sequence checker
Checks the sequence number of messages to check for dropped messages (used in combination with the Extended Packet Decoder to check the sequence number of the packet header)

* Pulse shape vector
Applies the given pulse shaper filter (\param pulseshaper) on the given data (\param data).

* Preamble/Header/Payload Demux
extension of the existing  Header/Payload Demux block, to support preambles

* Correlation Estimator 2
Improved correlation estimator, adding a fixed threshold and verbose mode to debug thresholds.


For more information, see the included project report. 
